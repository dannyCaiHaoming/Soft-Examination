# 1 数据的表示


## 1.1 进制的转换

### 1.1.1 二进制转十进制
![](/1.计算机组成原理/img/二进制转十进制.png)

### 1.1.2 十进制转二级制
![](/1.计算机组成原理/img/十进制转二进制.png)

对十进制数除二进行取余，从结果1开始倒序输出结果。

注：如果是将十进制转其他（例如8），也是将十进制数除8取余，从结果1开始倒序输出。

### 1.1.3 二进制转八进制与16进制
![](/1.计算机组成原理/img/二进制转八进制与十六进制.png)

1. 二进制转八进制：每`三`个二进制对一个八进制位

2. 二进制十六进制：每`四`个二进制位对应一个十六进制

## 1.2 原码反码补码移码
![](/1.计算机组成原理/img/原码反码补码移码.png)

1. 对于一个正数，原码反码补码都相同。
2. 对于一个负数
   1. 反码：符号位不变，其他取反
   2. 补码：原码基础上，符号位不变，所有位取反+1，（或者右到左找到第一位1，左边不变，右边全部取反）
3. 移码：补码基础上，符号我取反

- 原码和反码表示的范围是一样的，而且是对称的。
- 补码和移码表示的范围是一样的，且比原码反码`+1`，在于`0`这个位置上（移码补码没有0）

## 1.3 浮点运算
![](/1.计算机组成原理/img/浮点运算.png)

- 先进行对阶（小阶向大阶看齐），之后进行尾数计算，最后是舍入粗粒，结果规格化。

**浮点数表示的数值范围由阶码决定，所表示的数值精度由尾数决定**


# 2 CPU 结构
![](/1.计算机组成原理/img/CPU结构.png)

## 2.1 运算器

1. 算术逻辑单元（ALU）：运算器的重要组成，负责处理数据，实现对数据的算术运算和逻辑运算
2. 累加寄存器（AC）：累加寄存器，通用寄存器，当运算器的算术逻辑单元执行算术和逻辑运算时，为ALU提供工作区
3. 数据缓冲寄存器（DR）：CPU和内存、外设之间数据传送的中转站。
4. 状态条件寄存器（PSW）：保存由算术指令和逻辑指令运行或测试的结果建立的各种添加码
5. 程序计数器（PC）：存放下一条指令的地址。
6. 指令寄存器（IR）：用于存放当前从主存储器读出的正在执行的一条指令
7. 地址寄存器（AR）：保存CPU所访问的内存单元地址。
8. 指令译码器（ID）：

## 2.2 存储器

# 3 Flynn分类法
![](/1.计算机组成原理/img/Flynn分类法.png)

# 4 CISC和RISC

- CISC(复杂指令集计算机)：数量多，使用频率差别大，支持多种寻址方式，结合微程序控制技术
- RISC（精简指令集计算机）：数量少，使用频率接近，大多定长格式。增加通用寄存器，硬布线逻辑控制，适合采流水线

# 5 流水线

## 5.1 基本概念
![](/1.计算机组成原理/img/流水线.png)

## 5.2 流水线计算
![](/1.计算机组成原理/img/流水线计算.png)

## 5.3 流水线吞吐率计算
![](/1.计算机组成原理/img/流水线吞吐计算.png)

## 5.4 流水线加速比计算
![](/1.计算机组成原理/img/流水线加速比.png)

# 6 层次化存储结构

## 6.1 层级结构
- 寄存器
- Cache（高速缓存）
- 内存
- 外存
  

## 6.2 存储器的分类

### 6.2.1 按存储器所处的位置分类
- 内存
- 外存

### 6.2.2 按存储器的构成材料分类
- 磁存储器：用磁介质做成
- 半导体：
- 光存储器


### 6.2.3 按存储器工作方式分类
- 读写存储器：RAM
- 只读存储器
  - 固定只读：一般存放系统程序BIOS和用于微程序控制
  - 可编程只读
  - 可擦除可编程只读存储器
  - 电擦除可编程只读存储
  - 闪速存储器


### 6.2.4 按访问方式分类
- 按地址访问
- 按内容访问

### 6.2.5 按寻址方式分类
- 随机存储器（RAM）：可对任何存储单元存入或写入数据，访问任何一个存储单元所需时间是相同的
- 顺序存储器（SAM）：访问数据与数据所在存储位置相关
- 直接存储器（DAM）：接语随机存储和顺序存取之间。


## 6.3 主存

### 6.3.1 主存-分类
主存属于RAM，在断电之后内存中的所有数据将被清除掉。ROM在断电之后仍然可以存储信息内容

### 6.3.2 主存-编制
存储器总容量：每个地址位数*每个芯片总存储单元（总地址）*存储器片数
![](/1.计算机组成原理/img/主存编制.png)

## 6.4 Cache（高速缓存）

高速缓存中地址映像方法：直接影响，全相联映像、组相联映像
- 直接映像：值内存块与Cache块的对应关系是固定的。优点是变换简单，缺点是灵活性差，Cache块冲突高
- 全相联映像：允许主存任一块可以调入Cache存储器的任何一个块中。有点Cache块冲突率低灵活性好，缺点是访问慢
- 组相联映像：折中方法

# 7 局部性原理
- 时间局部性：如果程序中某条指令一旦被执行，则不久的将来该指令可能再次被执行
- 空间局部性：程序一旦访问了某个存储单元，则不久的将来，附近的存储单元也可能被访问。


# 8 磁盘工作原理
磁盘旋转周期即是磁盘读取的时间
![](/1.计算机组成原理/img/磁盘工作原理.png)
![](/1.计算机组成原理/img/磁盘问题.png)

## 9 总线结构
数据总线，地址总线，系统位数
- 数据总线（DB）：用来传送数据信息，是双向的。CPU可以通过DB从内存或IO设备读取数据，也可以通过DB向内存或IO传输数据。
- 地址总线（AB）：用于传送CPU发出的地址信息，是单向的。传送地址总线的目的是致命与CPU交换信息的内存单元或IO设备位置
- 控制总线（CB）：用来传送控制信号、时序信号和状态信息等，是双向表示。


计算机位数= 数据总线宽度
内容存量 一般等于 2^地址总线

# 10 系统可靠性分析

## 10.1 串联系统的可靠性（R）与失效率（λ）
![](/1.计算机组成原理/img/串联系统.png)

## 10.2 并联系统的可靠性（R）与失效率（μ）
![](/1.计算机组成原理/img/并联系统.png)

## 10.3 简单举例
![](/1.计算机组成原理/img/简单举例.png)

## 11 差错控制

## 11.1 校验码基本概念
码距：编码系统中两个码字的不相同位的个数

## 11.2 循环校验码（CRC）
应用于数据通信领域和磁介质存储系统中。
左边为信息码，右边为校验码。

## 11.3 奇偶校验码（PC）
奇偶校验是一种简单有效的校验方法（可以检错，不能纠错）。这种方法通过在编码中增加一位校验位来使编码中1的个数为奇数（奇校验）或者为偶数（偶校验），从而使码距变为2。

## 11.4 海明校验码（HC）
海明码的构成方法是在数据位之间的特定位置上插入k个校验位，通过扩大码距来实现检错和纠错（可以检错和纠错）。

设数据位是n位，校验位是k位，则n和k必须满足：2^k - 1 ≥ n + k。 

校验码的位置在：2^n为数上，如1，2，4，8
校验码数值：需要用组成当前下标的二进制数值之和的数值下标做异或操作
校验码组约束：
凡是位置符合这种形式的，XXX1，归到P1；
凡是位置符合这种形式的，XX1X，归到P2；
凡是位置符合这种形式的，X1XX，归到P3；
凡是位置符合这种形式的，1XXX，归到P4；

![](/1.计算机组成原理/img/海明码.png)
![](/1.计算机组成原理/img/校验位.png)

# 12 输入输入技术

IO系统基本功能及模型主要功能
- 隐藏物理设备细节，方便用户使用抽象的IO命令
- 实现设备无关性，方便用户使用抽象的逻辑设备名使用设备
- 提高处理机和设备的并行性，提高利用率

## 12.1 直接程序控制
直接程序控制是指外设数据的输入输出过程是在CPU执行程序的控制下完成的。分为：
- 无条件传送：此情况下，外设总是准备好的，可以无条件随时的接受CPU发来的输出数据，也能够无条件的随时向CPU提供数据
- 程序查询方式：利用查询方式进行输入输出，通过CPU执行程序来查询外设状态，判断外设是否准备好接受或输入数据

## 12.2 中断方式
对于程序控制IO方法，主要确定是CPU必须等待IO完成数据的传输，导致系统性能下降。
利用中断方式完成数据的输入输出过程为：当IO系统与外设交换数据时，CPU无需等待也不必去查询IO状态，可以抽身处理其他任务。当IO系统准备好后，则发出中断请求信息通知CPU，CPU则保存当前正在执行程序的现场，转入IO中断服务程序的执行，完成与IO系统的数据交换，则再返回被中断的程序继续执行。

## 12.3 直接存储器存储方式（DMA） --- 提供IO速度
不要经过CPU，直接主存和外设简历数据连接。
在计算机与外设交换数据的过程中，前两种方式都需要CPU通过执行程序来实现，限制了数据的传送速度。
DMA指数据在内存和IO设备之间直接成块传输，不需要CPU干涉，实际操作由DMA硬件自动执行。


## 12.4 输入、输出处理机（IOP）
DMA方式的出现减轻了CPU对I/O操作的控制，使得CPU的效率显著提高。而通道方式的出现则进一步提高了CPU的效率。通道是一个具有特殊功能的处理器，又称为输入输出处理器（IOP），它分担了CPU的一部分功能，可以实现对外围设备的统一管理，完成外围设备与主存之间的数据传送。

通道方式大大提高了CPU的工作效率，然而这种效率的提高是以增加更多的硬件为代价的。
